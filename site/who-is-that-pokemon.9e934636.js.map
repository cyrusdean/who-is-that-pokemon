{"version":3,"sources":["index.js"],"names":["utils","initialState","pokemon","selectedPokemonIndex","guessedPokemonIndex","status","correctGuesses","incorrectGuesses","randomIndex","arr","Math","floor","random","length","pokemonApp","state","init","console","log","updateStatus","pokemonCount","pokemonAPIResponse","fetch","then","res","json","catch","error","results","map","name","i","charAt","toUpperCase","slice","avatarUrl","startGameButtonEl","document","getElementById","addEventListener","startGame","bind","clearHTML","innerHTML","innerText","whoIsThatPokemonBannerEl","querySelectorAll","removeChild","lastChild","selectedPokemon","pokemonImage","createElement","src","appendChild","beginGuessing","guessingOptionIndexes","Array","includes","push","splice","timeoutToEndGame","setTimeout","finishGame","guessingOptionsEl","forEach","guessingOptionIndex","pokemonOption","pokemonOptionEl","event","clearTimeout","target","targetPokemon","didNotGuess","guessedCorrectly","textResult","correctGuessesEl","incorrectGuessesEl","initialPokemon","restInitialState","classList"],"mappings":"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","file":"who-is-that-pokemon.9e934636.js","sourceRoot":"..","sourcesContent":["const utils = {\n    initialState: {\n        pokemon: [],\n        selectedPokemonIndex: null,\n        guessedPokemonIndex: null,\n        status: 'ready',\n        correctGuesses: 0,\n        incorrectGuesses: 0\n    },\n    randomIndex: (arr) => Math.floor(Math.random() * arr.length)\n}\n\nconst pokemonApp = {\n    state: { ...utils.initialState },\n    /*\n          In the regular function, a function always defines its this value. \n          Arrow functions treat this keyword differently. They don’t define their \n          own context since it doesn’t have its own this context. They inherit \n          that from the parent scope whenever you call this.\n   \n          init: () => {\n              console.log(this) // -> {}\n          }\n      */\n    init: async function () {\n        console.log(this);\n        this.updateStatus('ready')\n\n        const pokemonCount = 368;\n        const pokemonAPIResponse = await fetch(\n            `https://pokeapi.co/api/v2/pokemon?limit=${pokemonCount}`\n        )\n            .then((res) => res.json())\n            .catch((error) => {\n                console.log(error);\n            });\n        console.log(pokemonAPIResponse);\n\n        let { results: pokemon } = pokemonAPIResponse;\n        pokemon = pokemon.map(({ name }, i) => {\n            const capitalizedPokemonName =\n                name.charAt(0).toUpperCase() + name.slice(1);\n            const avatarUrl = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/${i + 1\n                }.svg`\n            return {\n                name: capitalizedPokemonName,\n                avatarUrl,\n            };\n        });\n        console.log(pokemon);\n\n        this.state.pokemon = pokemon;\n\n        console.log(this);\n\n        const startGameButtonEl = document.getElementById(\"startGameButton\");\n        startGameButtonEl.addEventListener('click', this.startGame.bind(this))\n\n        console.log(startGameButtonEl);\n    },\n    clearHTML: function () {\n        const guessingOptionsEl = document.getElementById('guessingOptions')\n        guessingOptionsEl.innerHTML = ''\n\n        const answerEl = document.getElementById('answer')\n        answerEl.innerText = ''\n\n        const whoIsThatPokemonBannerEl = document.getElementById('whoIsThatPokemonBanner')\n        if (whoIsThatPokemonBannerEl.querySelectorAll('img').length > 1)\n            whoIsThatPokemonBannerEl.removeChild(whoIsThatPokemonBannerEl.lastChild)\n    },\n    startGame: function () {\n        console.log(this)\n        this.clearHTML()\n        this.updateStatus('viewing')\n\n        const selectedPokemonIndex = utils.randomIndex(this.state.pokemon)\n        this.state.selectedPokemonIndex = selectedPokemonIndex\n        const selectedPokemon = this.state.pokemon[selectedPokemonIndex]\n        console.log(selectedPokemon)\n        const { avatarUrl } = selectedPokemon\n\n        const whoIsThatPokemonBannerEl = document.getElementById('whoIsThatPokemonBanner')\n        const pokemonImage = document.createElement('img');\n        pokemonImage.src = avatarUrl\n        whoIsThatPokemonBannerEl.appendChild(pokemonImage)\n\n        this.beginGuessing()\n\n    },\n    beginGuessing: function () {\n        console.log(this)\n        this.updateStatus('guessing')\n        const { pokemon, selectedPokemonIndex } = this.state\n        const { randomIndex } = utils\n        let guessingOptionIndexes = [...Array(3)].map(() => randomIndex(pokemon))\n        console.log(guessingOptionIndexes)\n\n        if (!guessingOptionIndexes.includes(selectedPokemonIndex))\n            guessingOptionIndexes.splice(randomIndex(guessingOptionIndexes), 0, selectedPokemonIndex)\n        else guessingOptionIndexes.push(randomIndex(pokemon))\n        console.log(guessingOptionIndexes)\n\n        const timeoutToEndGame = setTimeout(this.finishGame.bind(this), 3000)\n\n        const guessingOptionsEl = document.getElementById('guessingOptions')\n        guessingOptionIndexes.forEach(guessingOptionIndex => {\n            const pokemonOption = pokemon[guessingOptionIndex]\n            const { name } = pokemonOption\n\n            const pokemonOptionEl = document.createElement('li');\n            pokemonOptionEl.innerText = name\n            pokemonOptionEl.addEventListener('click', (event) => {\n                clearTimeout(timeoutToEndGame)\n                const { target } = event;\n                const targetPokemon = target.innerText\n                console.log(targetPokemon)\n                this.state.guessedPokemonIndex = guessingOptionIndex\n                this.finishGame()\n            })\n\n            guessingOptionsEl.appendChild(pokemonOptionEl)\n        })\n\n\n    },\n    finishGame: function () {\n        console.log(this)\n        const { selectedPokemonIndex, guessedPokemonIndex, pokemon } = this.state\n        const didNotGuess = guessedPokemonIndex === null\n        const guessedCorrectly = selectedPokemonIndex === guessedPokemonIndex && !didNotGuess\n        let textResult = guessedCorrectly ? 'Yep' : 'Nope'\n        textResult = didNotGuess ? 'Oops' : textResult\n        const selectedPokemon = pokemon[selectedPokemonIndex]\n        console.log(selectedPokemon)\n        const { name } = selectedPokemon\n\n        const answerEl = document.getElementById('answer')\n        answerEl.innerText = `${textResult}! It's ${name}!`\n\n        const [correctGuessesEl, incorrectGuessesEl] = document.querySelectorAll('.count')\n        if (guessedCorrectly) {\n            this.state.correctGuesses++\n            correctGuessesEl.innerText = this.state.correctGuesses\n        } else {\n            this.state.incorrectGuesses++\n            incorrectGuessesEl.innerText = this.state.incorrectGuesses\n        }\n\n        const { pokemon: initialPokemon, correctGuesses, incorrectGuesses, ...restInitialState } = utils.initialState\n        this.state = { ...this.state, ...restInitialState }\n        console.log(utils.initialState)\n        console.log('this', this)\n        this.updateStatus('ready')\n    },\n    updateStatus: function (status) {\n        this.state.status = status\n        const gameContainer = document.getElementById('gameContainer')\n        gameContainer.classList = [status]\n    }\n};\n\n// Call our initialization of the application\npokemonApp.init();\n"]}